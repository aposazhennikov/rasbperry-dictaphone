# Иерархическое меню с озвучкой для незрячих пользователей

Проект представляет собой иерархическое меню с навигацией с помощью клавиш (пульта) и озвучкой всех пунктов меню.

## Требования

Для работы проекта необходимы следующие зависимости:

```
evdev>=1.6.0  # для работы с пультом
gTTS>=2.3.1   # для озвучки текста
```

Под Windows для воспроизведения звуков используется PowerShell и System.Media.SoundPlayer.
Под Linux для воспроизведения MP3-файлов требуется `mpg123`.

## Установка

1. Клонируйте репозиторий:
```
git clone <repository-url>
cd <repository-directory>
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Для Linux установите `mpg123`:
```
sudo apt-get install mpg123  # Debian/Ubuntu
```

## Использование

### Запуск меню

```
python run_menu.py
```

### Опции командной строки

```
python run_menu.py --help
```

Доступные опции:
- `--no-tts` - отключить озвучку
- `--cache-dir DIR` - указать директорию для кэширования звуков (по умолчанию "/home/aleks/cache_tts")
- `--pre-generate` - предварительно сгенерировать все звуки и выйти
- `--debug` - включить режим отладки с выводом диагностической информации
- `--use-mp3` - использовать MP3 вместо WAV (WAV обычно воспроизводится быстрее)

### Предварительная генерация звуков

Чтобы предварительно сгенерировать все звуки для меню (рекомендуется):

```
python run_menu.py --pre-generate
```

Это создаст все необходимые файлы озвучки в директории `sounds_cache`.

## Навигация по меню

- `KEY_UP` - перемещение вверх по меню
- `KEY_DOWN` - перемещение вниз по меню
- `KEY_SELECT` - выбор текущего пункта меню
- `KEY_BACK` - возврат в родительское меню

## Кастомизация

### Добавление новых пунктов меню

Структура меню задается в методе `create_menu_structure()` класса `MenuManager`. Для добавления новых пунктов измените соответствующий код в файле `menu/menu_manager.py`.

### Настройка озвучки

Для настройки параметров озвучки измените параметры в конструкторе класса `TTSManager` в файле `menu/tts_manager.py`.